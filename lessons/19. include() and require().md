## **📌 شرح دالة `include()` و `require()` و `include_once()` في PHP**

في **تطوير الويب**، غالبًا ما نحتاج إلى **إعادة استخدام** أكواد معينة عبر صفحات متعددة، مثل **الهيدر (Header)** و **الفوتر (Footer)**، بدلًا من كتابتها يدويًا في كل صفحة. يمكن تحقيق ذلك باستخدام **`include()`** و **`require()`** و **`include_once()`** في PHP.

---

## **📝 أولًا: `include()` - استدعاء ملف خارجي**

🔹 دالة `include()` تستخدم لإدراج **محتوى ملف خارجي** داخل صفحة PHP.  
🔹 إذا كان الملف غير موجود، ستظهر **تحذيرات (Warnings)** لكن الكود سيستمر في العمل.

💡 **مثال لاستخدام `include()` لإضافة الهيدر والفوتر في صفحات مختلفة:**

```php
<?php include("header.html"); ?>

<h2>هذه الصفحة الرئيسية</h2>
<p>مرحبًا بك في الموقع!</p>

<?php include("footer.html"); ?>
```

📌 **الناتج**: سيتم **إدراج محتوى `header.html` و `footer.html`** داخل الصفحة.

---

## **⚠️ ثانيًا: `require()` - استدعاء إلزامي لملف خارجي**

🔹 دالة `require()` تعمل مثل `include()`، لكنها **توقف التنفيذ** بالكامل إذا كان الملف غير موجود أو به خطأ.  
🔹 يفضل استخدامها عند التعامل مع **ملفات ضرورية** لعمل الموقع، مثل ملفات **الاتصال بقاعدة البيانات**.

💡 **مثال على `require()`**:

```php
<?php require("config.php"); ?>

<h2>مرحبًا بك في الموقع!</h2>
```

📌 **إذا كان `config.php` غير موجود، ستظهر رسالة خطأ وسيتم **إيقاف تنفيذ الصفحة**.

🔹 **الفرق بين `include()` و `require()`**:

|الوظيفة|`include()`|`require()`|
|---|---|---|
|هل يوقف التنفيذ عند الخطأ؟|❌ لا|✅ نعم|
|متى يستخدم؟|عندما يكون الملف غير ضروري للتنفيذ|عندما يكون الملف ضروريًا|

---

## **♻️ ثالثًا: `include_once()` و `require_once()` - الإدراج مرة واحدة فقط**

🔹 عند استخدام `include()` أو `require()` عدة مرات، قد يؤدي ذلك إلى **إدراج نفس الملف أكثر من مرة**، مما قد يسبب **أخطاء برمجية**.  
🔹 لحل هذه المشكلة، نستخدم `include_once()` أو `require_once()` لضمان **إدراج الملف مرة واحدة فقط**.

💡 **مثال على `include_once()`**:

```php
<?php include_once("header.html"); ?>
```

📌 إذا تم استدعاء `header.html` مرة أخرى في الصفحة، فلن يتم إدراجه مجددًا.

💡 **مثال على `require_once()`**:

```php
<?php require_once("config.php"); ?>
```

📌 **يضمن عدم تكرار تحميل `config.php` حتى لو تم استدعاؤه أكثر من مرة**.

---

## **🔍 مقارنة شاملة بين `include()` و `require()` و `include_once()` و `require_once()`**

|الوظيفة|`include()`|`require()`|`include_once()`|`require_once()`|
|---|---|---|---|---|
|إدراج ملف خارجي|✅ نعم|✅ نعم|✅ نعم|✅ نعم|
|توقف التنفيذ عند الخطأ؟|❌ لا|✅ نعم|❌ لا|✅ نعم|
|يمنع التكرار؟|❌ لا|❌ لا|✅ نعم|✅ نعم|
|متى يستخدم؟|عند إدراج ملفات غير ضرورية|عند إدراج ملفات أساسية|عند إدراج ملفات غير ضرورية ولكن دون تكرار|عند إدراج ملفات أساسية بدون تكرار|

---

## **🎯 متى تستخدم كل دالة؟**

✅ **استخدم `include()`** عند إدراج ملفات **غير ضرورية** (مثل ملفات تصميم أو أجزاء HTML).  
✅ **استخدم `require()`** عند إدراج ملفات **ضرورية** لعمل الموقع، مثل **الاتصال بقاعدة البيانات**.  
✅ **استخدم `include_once()`** عند الحاجة إلى إدراج **ملف HTML أو كود برمجي مرة واحدة فقط**.  
✅ **استخدم `require_once()`** عند الحاجة إلى **ملفات أساسية بدون تكرار** مثل `config.php`.

---

## **🔹 مثال عملي متكامل: استخدام `include()` مع `require()` و `include_once()`**

### **📌 ملف `header.php` (الهيدر)**

```php
<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>موقعي</title>
</head>
<body>
    <h1>مرحبًا بك في موقعي</h1>
    <hr>
```

### **📌 ملف `footer.php` (الفوتر)**

```php
    <hr>
    <footer>جميع الحقوق محفوظة &copy; 2025</footer>
</body>
</html>
```

### **📌 ملف `config.php` (إعدادات قاعدة البيانات)**

```php
<?php
$host = "localhost";
$user = "root";
$password = "";
$dbname = "test_db";

// إنشاء اتصال بقاعدة البيانات
$conn = mysqli_connect($host, $user, $password, $dbname);

if (!$conn) {
    die("فشل الاتصال بقاعدة البيانات: " . mysqli_connect_error());
}
?>
```

### **📌 ملف `index.php` (الصفحة الرئيسية)**

```php
<?php
require_once("config.php");  // إدراج ملف الإعدادات
include("header.php");       // إدراج الهيدر
?>

<h2>هذه الصفحة الرئيسية</h2>
<p>مرحبًا بك في موقعنا!</p>

<?php include("footer.php"); // إدراج الفوتر ?>
```

---

## **🛠️ لماذا `include()` و `require()` مهمين؟**

✔ **إعادة استخدام الكود**: لا تحتاج إلى كتابة نفس الأكواد في كل صفحة.  
✔ **تحسين صيانة الكود**: أي تعديل في **الهيدر أو الفوتر أو الاتصال بقاعدة البيانات** يتم تحديثه في كل الصفحات تلقائيًا.  
✔ **تحسين الأداء**: يقلل **تكرار الكود**، مما يجعل الموقع أكثر **كفاءة وسهولة في التعديل**.  
✔ **تقليل الأخطاء**: `require_once()` و `include_once()` يمنعان **إدراج نفس الملف أكثر من مرة**، مما يمنع الأخطاء البرمجية.

📌 **بالتالي، باستخدام `include()` و `require()` بشكل صحيح، يمكنك تحسين هيكلة مشروعك في PHP بسهولة! 🚀**