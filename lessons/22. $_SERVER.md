## **🔹 شرح `$_SERVER` في PHP**

### **📌 ما هو `$_SERVER` في PHP؟**

ال`$_SERVER` هو **مصفوفة (Associative Array)** تُنشئها خوادم الويب تلقائيًا، وتحتوي على **بيانات حول البيئة الحالية للويب**، مثل **المسارات (Paths)**، و **الرؤوس (Headers)**، و **طرق الطلب (Request Methods)**، و **موقع السكريبت الجاري تنفيذه**.

💡 يتم استخدامها للحصول على معلومات حول **المستخدم، الخادم، و السكريبت الجاري تشغيله**.

---

## **🔹 كيفية استخدام `$_SERVER`**

يمكنك طباعة جميع القيم المخزنة داخل `$_SERVER` باستخدام **`foreach`**.

### **🛠️ مثال: طباعة جميع القيم داخل `$_SERVER`**

```php
<?php
foreach ($_SERVER as $key => $value) {
    echo "$key => $value <br>";
}
?>
```

✅ **هذا الكود سيعرض جميع المعلومات المخزنة داخل `$_SERVER`.**  
🔹 ولكن ليس كل القيم ستكون مفيدة، لذا سنركز على الأكثر أهمية.

---

## **🔹 أهم القيم في `$_SERVER` و استخداماتها**

|**المفتاح (`$_SERVER`)**|**الوصف**|
|---|---|
|`PHP_SELF`|**المسار إلى الملف الحالي.** يُستخدم في النماذج (Forms).|
|`REQUEST_METHOD`|**طريقة الطلب (GET أو POST).** تُستخدم للتحقق من طريقة الإرسال.|
|`SERVER_NAME`|**اسم الخادم (مثل `localhost` أو `example.com`).**|
|`HTTP_HOST`|**المجال (Domain) المستخدم في الطلب.**|
|`SCRIPT_FILENAME`|**المسار الكامل للملف الجاري تنفيذه.**|
|`HTTP_USER_AGENT`|**معلومات المتصفح (Browser Info).**|
|`REMOTE_ADDR`|**عنوان IP الخاص بالمستخدم.**|

---

## **🔹 استخدام `PHP_SELF` لتحديد المسار الحالي**

`PHP_SELF` يُستخدم غالبًا داخل **النماذج (Forms)** لتحديد اسم الملف الحالي **تلقائيًا**.

### **🛠️ مثال: استخدام `PHP_SELF` في نموذج إدخال**

```php
<form action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?>" method="post">
    <label>أدخل اسمك:</label>
    <input type="text" name="username">
    <input type="submit" value="إرسال">
</form>
```

🔹 **لماذا نستخدم `htmlspecialchars($_SERVER['PHP_SELF'])`؟**  
✅ **لحماية النموذج من هجمات XSS (Cross-Site Scripting).**  
✅ **يحول `<` و `>` إلى كود HTML آمن، مما يمنع تنفيذ أكواد خبيثة.**

---

## **🔹 استخدام `REQUEST_METHOD` لمعرفة طريقة الطلب (`GET` أو `POST`)**

💡 يمكن استخدام `$_SERVER["REQUEST_METHOD"]` بدلاً من `isset($_POST["submit"])` للتأكد من أن الطلب تم إرساله بطريقة `POST`.

### **🛠️ مثال: التحقق من طريقة الطلب**

```php
<?php
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $username = $_POST["username"];
    echo "مرحبًا، $username!";
}
?>
```

✅ **يتم تنفيذ الكود فقط إذا كان الطلب `POST`، مما يحسن الأمان والموثوقية.**

---

## **🔹 استخدام `SERVER_NAME` للحصول على اسم الخادم**

`$_SERVER["SERVER_NAME"]` يُعيد **اسم الخادم المستخدم**.

### **🛠️ مثال: طباعة اسم الخادم**

```php
<?php
echo "اسم الخادم: " . $_SERVER["SERVER_NAME"];
?>
```

✅ **إذا كنت تعمل على Localhost، ستُعيد القيمة `"localhost"`**.

---

## **🔹 استخدام `REMOTE_ADDR` للحصول على عنوان IP الخاص بالمستخدم**

`$_SERVER["REMOTE_ADDR"]` تُعيد **عنوان IP الخاص بالمستخدم**.

### **🛠️ مثال: طباعة IP الخاص بالمستخدم**

```php
<?php
echo "عنوان IP الخاص بك: " . $_SERVER["REMOTE_ADDR"];
?>
```

✅ يمكن استخدام هذا في **أنظمة تسجيل الدخول والتتبع الأمني**.

---

## **🔹 استخدام `HTTP_USER_AGENT` للحصول على معلومات المتصفح**

`$_SERVER["HTTP_USER_AGENT"]` يُعيد معلومات حول المتصفح المستخدم.

### **🛠️ مثال: طباعة معلومات المتصفح**

```php
<?php
echo "متصفحك: " . $_SERVER["HTTP_USER_AGENT"];
?>
```

✅ **يُستخدم غالبًا للكشف عن نوع الجهاز (Mobile/Desktop) أو توافق المتصفح.**

---

## **📌 مقارنة بين `$_SERVER` و `$_POST` و `$_GET`**

|**الميزة**|**`$_SERVER`**|**`$_POST`**|**`$_GET`**|
|---|---|---|---|
|**المصدر**|الخادم (Server)|المستخدم (Client)|المستخدم (Client)|
|**الأمان**|عالي|متوسط|ضعيف (يتعرض لهجمات XSS بسهولة)|
|**متى يُستخدم؟**|للحصول على بيانات عن البيئة والملف الحالي|عند إرسال بيانات حساسة مثل تسجيل الدخول|عند إرسال بيانات غير حساسة مثل البحث|

---

## **📌 ملخص سريع**

✅ `$_SERVER` تُوفر معلومات عن **الخادم والمستخدم والملف الحالي**.  
✅ يمكن استخدامها **لتحسين الأمان** عند التحقق من الطلبات (`POST` و `GET`).  
✅ `PHP_SELF` يُستخدم داخل النماذج لتحديد المسار الحالي **بأمان**.  
✅ `REQUEST_METHOD` تُساعد في التحقق من طريقة الطلب (`POST` أو `GET`).  
✅ `SERVER_NAME` يُعيد **اسم الدومين** أو **الخادم الحالي**.  
✅ `REMOTE_ADDR` يُعيد **عنوان IP الخاص بالمستخدم**.  
✅ `HTTP_USER_AGENT` يُعيد **تفاصيل المتصفح والجهاز المستخدم**.

🚀 **الآن يمكنك فهم كيفية استخدام `$_SERVER` بفعالية في PHP!** 💡