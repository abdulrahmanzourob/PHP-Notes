## **📌 ما هو التجزئة (Hashing)؟**

التجزئة هي **عملية تحويل البيانات الحساسة** (مثل كلمات المرور) إلى **سلسلة عشوائية من الأحرف، الأرقام، والرموز** باستخدام **معادلة رياضية**.

🔹 **الفرق بين التشفير والتجزئة:**

| **الميزة**        | **التشفير (Encryption)**            | **التجزئة (Hashing)**                     |
| ----------------- | ----------------------------------- | ----------------------------------------- |
| **اتجاه العملية** | ثنائية الاتجاه 🔄 (يمكن فك التشفير) | أحادية الاتجاه 🔒 (لا يمكن استرجاع الأصل) |
| **الاستخدام**     | حماية البيانات أثناء النقل          | تخزين كلمات المرور بشكل آمن               |
| **الهدف**         | تشفير واسترجاع البيانات عند الحاجة  | منع استرجاع النص الأصلي                   |

❌ **إذا تم اختراق قاعدة البيانات بدون تجزئة، يمكن للمهاجم رؤية جميع كلمات المرور الأصلية.**  
✅ **لكن عند استخدام التجزئة، ستظهر كلمات المرور كقيم غير مفهومة، مما يزيد من الأمان.**

---

## **🛠️ كيفية استخدام التجزئة في PHP**

### **🔹 إنشاء تجزئة لكلمة المرور**

في الفيديو، استخدم المبرمج **خوارزمية Bcrypt** لإنشاء تجزئة لكلمة المرور `Pizza123` باستخدام الدالة `password_hash()`.

### **📌 مثال برمجي على إنشاء تجزئة لكلمة المرور:**

```php
<?php
$password = "Pizza123"; // كلمة المرور الأصلية
$hash = password_hash($password, PASSWORD_DEFAULT); // إنشاء التجزئة باستخدام Bcrypt

echo $hash; // طباعة التجزئة الناتجة
?>
```

### **🔍 شرح الكود:**

1️⃣ **يتم تخزين كلمة المرور الأصلية** في المتغير `$password`.  
2️⃣ **يتم إنشاء التجزئة باستخدام `password_hash()`**:

- **المعامل الأول** هو كلمة المرور (`$password`).
- **المعامل الثاني** هو **`PASSWORD_DEFAULT`** (وهو Bcrypt حاليًا).  
    3️⃣ **يتم طباعة التجزئة الناتجة**، والتي تكون **سلسلة طويلة غير مفهومة** تشبه:

```
$2y$10$eW5ZQWQ0sG8zOWVlVnBq0uGhHlV.bh.tI9urIV1U/aGXp7hA/Y9W6
```

🔹 **ملاحظة:**

- عند استخدام `PASSWORD_DEFAULT`، سيتم تحديث الخوارزمية تلقائيًا عند إصدار PHP جديد، مما يحافظ على أعلى مستوى من الأمان.

---

## **🔑 كيف يتم التحقق من كلمة المرور؟**

عند تسجيل الدخول، يجب مقارنة كلمة المرور التي أدخلها المستخدم مع التجزئة المخزنة.  
❌ **لا يمكن مقارنة كلمة المرور مباشرة مع التجزئة باستخدام `==`**، بل يجب استخدام `password_verify()`.

### **📌 مثال برمجي على التحقق من كلمة المرور:**

```php
<?php
$hash = '$2y$10$eW5ZQWQ0sG8zOWVlVnBq0uGhHlV.bh.tI9urIV1U/aGXp7hA/Y9W6'; // تجزئة مخزنة في قاعدة البيانات
$input_password = "Pizza123"; // كلمة المرور التي أدخلها المستخدم

if (password_verify($input_password, $hash)) {
    echo "✅ You are logged in"; // إذا كانت كلمة المرور صحيحة
} else {
    echo "❌ Incorrect password"; // إذا كانت كلمة المرور غير صحيحة
}
?>
```

### **🔍 شرح الكود:**

1️⃣ **يتم استرجاع التجزئة من قاعدة البيانات** (`$hash`).  
2️⃣ **يتم استلام كلمة المرور المدخلة من المستخدم** (`$input_password`).  
3️⃣ **تستخدم `password_verify()` للتحقق مما إذا كانت الكلمة المدخلة تتطابق مع التجزئة المخزنة**.  
4️⃣ **إذا كانت كلمة المرور صحيحة** ➝ يتم تسجيل الدخول.  
5️⃣ **إذا كانت كلمة المرور خاطئة** ➝ يتم عرض رسالة "كلمة مرور غير صحيحة".

---

## **⚠️ ماذا يحدث عند إدخال كلمة مرور غير صحيحة؟**

تم تجربة عدة كلمات لمعرفة النتيجة:

```php
password_verify("hamburger666", $hash); // ❌ Incorrect password
password_verify("hotdog1212", $hash); // ❌ Incorrect password
password_verify("Pizza123", $hash); // ✅ You are logged in
```

✅ عند إدخال `"Pizza123"` تطابق التجزئة، وتم السماح بالدخول.  
❌ إدخال أي كلمة مرور خاطئة يظهر رسالة "كلمة مرور غير صحيحة".

---

## **🔐 لماذا يجب استخدام `password_hash()`؟**

❌ **أخطاء شائعة:**

```php
$password = "Pizza123";
echo $password; // المخترق سيرى كلمة المرور الأصلية مباشرة!
```

✅ **الطريقة الصحيحة:**

```php
$hash = password_hash("Pizza123", PASSWORD_DEFAULT);
echo $hash; // سيتم عرض التجزئة بدلاً من كلمة المرور الأصلية.
```

🔹 **النتيجة؟** حتى لو تمت سرقة قاعدة البيانات، لن يستطيع المخترق معرفة كلمة المرور الأصلية.

---

## **📌 كيفية تحسين أمان كلمة المرور**

✅ **أفضل الممارسات لتخزين كلمات المرور بأمان:** 1️⃣ **استخدم `password_hash()` دائمًا مع `PASSWORD_DEFAULT`** لضمان استخدام أحدث خوارزمية.  
2️⃣ **لا تقم أبدًا بتخزين كلمة المرور الأصلية في قاعدة البيانات**، فقط احفظ التجزئة.  
3️⃣ **استخدم `password_verify()` لمقارنة كلمة المرور المدخلة مع التجزئة المخزنة**.  
4️⃣ **استخدم تقنية "Salt"** وهي قيمة عشوائية تضاف إلى كلمة المرور قبل التجزئة، ولكن `password_hash()` يقوم بذلك تلقائيًا.  
5️⃣ **قم بتحديث التجزئة عند الحاجة** إذا تم تحسين الخوارزميات.

---

## **📝 مقارنة بين الطرق الآمنة وغير الآمنة**

|**الميزة**|**تخزين بدون تجزئة ❌**|**استخدام `password_hash()` ✅**|
|---|---|---|
|إمكانية استرجاع كلمة المرور|نعم ❌|لا ✅|
|مستوى الأمان|ضعيف جدًا ❌|مرتفع جدًا ✅|
|الحماية ضد الاختراق|لا يوجد ❌|نعم ✅|
|دعم PHP للخوارزميات الجديدة|لا ❌|نعم ✅|

---

## **🎯 ملخص سريع**

|**العملية**|**الدالة في PHP**|**الغرض**|
|---|---|---|
|**تجزئة كلمة المرور**|`password_hash()`|تحويل كلمة المرور إلى تجزئة غير قابلة للعكس|
|**التحقق من كلمة المرور**|`password_verify()`|مقارنة كلمة المرور المدخلة بالتجزئة المخزنة|

✅ باستخدام `password_hash()` و`password_verify()`, يمكننا تأمين كلمات المرور وحمايتها من المخترقين.  
🔒 **لا تحفظ أبدًا كلمات المرور كنصوص عادية في قاعدة البيانات!**

---

## **💡 ماذا بعد؟**

بعد تعلم كيفية تجزئة كلمات المرور، يمكنك:  
1️⃣ استخدام هذه التقنية عند إنشاء صفحات تسجيل دخول.  
2️⃣ دمجها مع قواعد بيانات MySQL لحفظ الحسابات بأمان.  
3️⃣ إضافة **مزايا حماية إضافية** مثل **التشفير ثنائي العامل (2FA)** لتعزيز الأمان.

🔹 **بهذه الطريقة، يمكنك حماية بيانات المستخدمين وضمان عدم تسرب كلمات المرور حتى في حال اختراق قاعدة البيانات.** 🚀